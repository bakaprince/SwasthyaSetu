<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <link rel="icon" type="image/png" href="../assets/icons/favicon.png" />
    <title>Outbreak Predictions - National Health Interoperability</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Playfair+Display:wght@600;700&display=swap"
        rel="stylesheet" />

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#86efac",
                        secondary: "#113841",
                        "secondary-light": "#1d525e",
                        "background-dark": "#0d2b32",
                        "background-light": "#fffefc", // Light cream background
                        "accent-purple": "#e0defc",
                        "accent-green": "#e6f0c2",
                        "accent-blue": "#d0e8f2",
                        "health-orange": "#f78e69",
                        "gov-gold": "#ffd700",
                    },
                    fontFamily: {
                        display: ["Playfair Display", "serif"],
                        sans: ["DM Sans", "sans-serif"],
                    },
                },
            },
        };
    </script>

    <style>
        .nav-link {
            transition: all 0.2s;
            position: relative;
        }

        .nav-link:hover {
            color: #86efac;
        }

        .nav-link.active {
            color: #86efac;
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: #86efac;
        }

        .hero-pattern {
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2386efac' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4v-4H4v4H0v2h4v4h2v-4h4v-2H6zM36 4v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark font-sans antialiased text-gray-900 dark:text-gray-100 relative">
    <!-- Global Dot Pattern Overlay -->
    <div class="fixed inset-0 w-full h-full dot-pattern pointer-events-none z-0"></div>

    <!-- Top Navigation -->
    <nav class="bg-secondary dark:bg-secondary text-white border-b border-white/10 sticky top-0 z-50">
        <!-- Top Bar -->
        <div class="px-8 py-4 flex items-center justify-between border-b border-white/10">
            <a href="../index.html" class="flex items-center gap-3">
                <img src="../assets/images/logo.png" alt="SwasthyaSetu Logo" class="h-8 w-auto">
                <div class="flex flex-col">
                    <span class="text-xs font-bold text-gov-gold tracking-widest uppercase">MoHFW Interop Portal</span>
                    <span class="text-xs text-primary font-bold">GOVERNMENT</span>
                </div>
            </a>

            <div class="flex items-center gap-4">
                <div class="flex items-center gap-3 ml-4 pl-4 border-l border-white/20">
                    <img src="https://ui-avatars.com/api/?name=Gov+Admin&background=ffd700&color=113841" alt="User"
                        class="w-8 h-8 rounded-full border border-gov-gold">
                    <div>
                        <p class="text-sm font-semibold" id="admin-name">Ministry Admin</p>
                        <p class="text-xs text-gov-gold" id="admin-dept">National Health Authority</p>
                    </div>
                </div>
                <button id="logout-btn"
                    class="ml-4 px-4 py-2 bg-red-500/80 hover:bg-red-600 text-white rounded-lg text-sm font-semibold transition-colors">
                    Logout
                </button>
            </div>
        </div>

        <!-- Navigation Links -->
        <div class="px-8 py-0 flex items-center gap-8 overflow-x-auto">
            <a href="government-dashboard.html"
                class="nav-link flex items-center gap-2 px-4 py-4 text-sm font-medium text-gray-300">
                <span class="material-icons-outlined text-lg">insights</span>
                National Dashboard
            </a>
            <a href="government-hospitals.html"
                class="nav-link flex items-center gap-2 px-4 py-4 text-sm font-medium text-gray-300">
                <span class="material-icons-outlined text-lg">domain</span>
                Hospital Connectivity
            </a>
            <a href="government-resources.html"
                class="nav-link flex items-center gap-2 px-4 py-4 text-sm font-medium text-gray-300">
                <span class="material-icons-outlined text-lg">inventory_2</span>
                Resource Allocation
            </a>
            <a href="government-outbreak.html"
                class="nav-link active flex items-center gap-2 px-4 py-4 text-sm font-medium">
                <span class="material-icons-outlined text-lg">coronavirus</span>
                Outbreak Predictions
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="p-8 min-h-screen relative z-10">

        <!-- Page Header -->
        <div class="flex flex-col md:flex-row md:items-end justify-between gap-4 mb-8 fade-in">
            <div>
                <h1 class="text-3xl font-bold text-secondary dark:text-white mb-1 font-display">Outbreak Predictions &
                    Health Analytics</h1>
                <p class="text-gray-600 dark:text-gray-400">Seasonal trends, age group analysis, and predictive disease
                    modeling</p>
            </div>
            <div class="flex gap-3">
                <button
                    class="px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg text-sm font-medium hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2">
                    <span class="material-icons-outlined text-sm">download</span>
                    Export Report
                </button>
            </div>
        </div>

        <!-- Alert Banner -->
        <div class="bg-gradient-to-r from-red-500 to-orange-500 text-white rounded-2xl p-6 mb-8 fade-in shadow-lg">
            <div class="flex items-start gap-4">
                <span class="material-icons-outlined text-3xl animate-pulse">warning</span>
                <div class="flex-1">
                    <h3 class="font-bold text-lg mb-1">Critical Disease Surveillance Alert - February 2026</h3>
                    <p class="text-sm opacity-90">Jaundice outbreak in Madhya Pradesh (450+ cases). Winter respiratory
                        infections elevated. Preparing for upcoming monsoon season.</p>
                </div>
                <button
                    class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-semibold transition-colors">
                    View Details
                </button>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 fade-in">
            <!-- Predicted Outbreaks -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl border-l-4 border-red-500 shadow-sm">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Predicted Outbreaks</p>
                        <h3 class="text-3xl font-bold text-gray-800 dark:text-white mt-1">5</h3>
                    </div>
                    <span class="p-2 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-lg"><span
                            class="material-icons-outlined">coronavirus</span></span>
                </div>
                <div class="text-xs text-red-500 font-semibold flex items-center gap-1">
                    <span class="material-icons-outlined text-xs">trending_up</span> Next 60 days
                </div>
            </div>

            <!-- High Risk Zones -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl border-l-4 border-orange-500 shadow-sm">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">High Risk Zones</p>
                        <h3 class="text-3xl font-bold text-gray-800 dark:text-white mt-1">8</h3>
                    </div>
                    <span class="p-2 bg-orange-50 dark:bg-orange-900/20 text-orange-600 rounded-lg"><span
                            class="material-icons-outlined">location_on</span></span>
                </div>
                <div class="text-xs text-gray-400 font-semibold">States under surveillance</div>
            </div>

            <!-- Seasonal Index -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl border-l-4 border-yellow-500 shadow-sm">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Seasonal Risk Index</p>
                        <h3 class="text-3xl font-bold text-gray-800 dark:text-white mt-1">4.2</h3>
                    </div>
                    <span class="p-2 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 rounded-lg"><span
                            class="material-icons-outlined">thermostat</span></span>
                </div>
                <div class="text-xs text-yellow-500 font-semibold flex items-center gap-1">
                    <span class="material-icons-outlined text-xs">ac_unit</span> Winter season
                </div>
            </div>

            <!-- Vaccination Coverage -->
            <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl border-l-4 border-green-500 shadow-sm">
                <div class="flex justify-between items-start mb-4">
                    <div>
                        <p class="text-gray-500 dark:text-gray-400 text-sm font-medium">Vaccination Coverage</p>
                        <h3 class="text-3xl font-bold text-gray-800 dark:text-white mt-1">91%</h3>
                    </div>
                    <span class="p-2 bg-green-50 dark:bg-green-900/20 text-green-600 rounded-lg"><span
                            class="material-icons-outlined">vaccines</span></span>
                </div>
                <div class="text-xs text-green-500 font-semibold flex items-center gap-1">
                    <span class="material-icons-outlined text-xs">check_circle</span> Target: 95%
                </div>
            </div>
        </div>

        <!-- Main Charts Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">

            <!-- Seasonal Health Trends -->
            <div
                class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-lg text-secondary dark:text-white flex items-center gap-2">
                        <span class="material-icons-outlined text-primary">calendar_month</span>
                        Seasonal Disease Trends
                    </h3>
                    <select
                        class="px-3 py-1.5 text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg">
                        <option selected>2026</option>
                        <option>2025</option>
                        <option>2024</option>
                        <option>2023</option>
                    </select>
                </div>
                <div class="h-80">
                    <canvas id="seasonalChart"></canvas>
                </div>
            </div>

            <!-- Age Group Distribution -->
            <div
                class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-lg text-secondary dark:text-white flex items-center gap-2">
                        <span class="material-icons-outlined text-primary">groups</span>
                        Cases by Age Group
                    </h3>
                    <select id="diseaseSelector"
                        class="px-3 py-1.5 text-xs bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg">
                        <option value="all">All Diseases</option>
                        <option value="covid">COVID-19</option>
                        <option value="dengue">Dengue</option>
                        <option value="influenza">Influenza</option>
                        <option value="malaria">Malaria</option>
                        <option value="jaundice">Jaundice</option>
                    </select>
                </div>
                <div class="h-80">
                    <canvas id="ageGroupChart"></canvas>
                </div>
            </div>

            <!-- Outbreak Prediction Model -->
            <div
                class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-lg text-secondary dark:text-white flex items-center gap-2">
                        <span class="material-icons-outlined text-primary">analytics</span>
                        30-Day Outbreak Forecast
                    </h3>
                    <div class="flex gap-2">
                        <span
                            class="px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded text-xs font-semibold">AI
                            Model</span>
                    </div>
                </div>
                <div class="h-80">
                    <canvas id="predictionChart"></canvas>
                </div>
            </div>

            <!-- Disease Severity Matrix -->
            <div
                class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="font-bold text-lg text-secondary dark:text-white flex items-center gap-2">
                        <span class="material-icons-outlined text-primary">bubble_chart</span>
                        Disease Severity Matrix
                    </h3>
                </div>
                <div class="h-80">
                    <canvas id="severityChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Regional Breakdown -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">

            <!-- Top Affected States -->
            <div
                class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <h3 class="font-bold text-lg text-secondary dark:text-white mb-6 flex items-center gap-2">
                    <span class="material-icons-outlined text-primary">map</span>
                    Top Affected States
                </h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200 hover:scale-[1.02] state-card"
                        data-state="Madhya Pradesh" data-disease="Jaundice" data-cases="456" data-severity="critical">
                        <div class="flex items-center gap-3">
                            <span
                                class="w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center text-sm font-bold">1</span>
                            <div>
                                <p class="font-semibold text-gray-900 dark:text-white">Madhya Pradesh</p>
                                <p class="text-xs text-gray-500">Jaundice outbreak</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-red-600 dark:text-red-400 font-bold">456</span>
                            <span class="material-icons-outlined text-gray-400 text-sm">chevron_right</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200 hover:scale-[1.02] state-card"
                        data-state="Delhi NCR" data-disease="Respiratory Infections" data-cases="1234"
                        data-severity="high">
                        <div class="flex items-center gap-3">
                            <span
                                class="w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center text-sm font-bold">2</span>
                            <div>
                                <p class="font-semibold text-gray-900 dark:text-white">Delhi NCR</p>
                                <p class="text-xs text-gray-500">Respiratory infections</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-orange-600 dark:text-orange-400 font-bold">1,234</span>
                            <span class="material-icons-outlined text-gray-400 text-sm">chevron_right</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200 hover:scale-[1.02] state-card"
                        data-state="Maharashtra" data-disease="Seasonal Flu" data-cases="987" data-severity="medium">
                        <div class="flex items-center gap-3">
                            <span
                                class="w-8 h-8 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold">3</span>
                            <div>
                                <p class="font-semibold text-gray-900 dark:text-white">Maharashtra</p>
                                <p class="text-xs text-gray-500">Seasonal flu</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-yellow-600 dark:text-yellow-400 font-bold">987</span>
                            <span class="material-icons-outlined text-gray-400 text-sm">chevron_right</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg cursor-pointer hover:shadow-md transition-all duration-200 hover:scale-[1.02] state-card"
                        data-state="West Bengal" data-disease="Waterborne Diseases" data-cases="654"
                        data-severity="medium">
                        <div class="flex items-center gap-3">
                            <span
                                class="w-8 h-8 bg-gray-500 text-white rounded-full flex items-center justify-center text-sm font-bold">4</span>
                            <div>
                                <p class="font-semibold text-gray-900 dark:text-white">West Bengal</p>
                                <p class="text-xs text-gray-500">Waterborne diseases</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-gray-600 dark:text-gray-400 font-bold">654</span>
                            <span class="material-icons-outlined text-gray-400 text-sm">chevron_right</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Risk Factors -->
            <div
                class="bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm">
                <h3 class="font-bold text-lg text-secondary dark:text-white mb-6 flex items-center gap-2">
                    <span class="material-icons-outlined text-primary">warning</span>
                    Key Risk Factors
                </h3>
                <div class="space-y-4">
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-gray-700 dark:text-gray-300">Winter Season</span>
                            <span class="font-bold text-orange-600">Medium-High</span>
                        </div>
                        <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                            <div class="h-full bg-orange-500 rounded-full" style="width: 68%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-gray-700 dark:text-gray-300">Population Density</span>
                            <span class="font-bold text-orange-600">Medium</span>
                        </div>
                        <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                            <div class="h-full bg-orange-500 rounded-full" style="width: 65%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-gray-700 dark:text-gray-300">Sanitation Index</span>
                            <span class="font-bold text-yellow-600">Medium</span>
                        </div>
                        <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                            <div class="h-full bg-yellow-500 rounded-full" style="width: 58%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="flex justify-between text-sm mb-2">
                            <span class="text-gray-700 dark:text-gray-300">Healthcare Access</span>
                            <span class="font-bold text-green-600">Good</span>
                        </div>
                        <div class="h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                            <div class="h-full bg-green-500 rounded-full" style="width: 78%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recommended Actions -->
            <div class="bg-gradient-to-br from-secondary to-secondary-light text-white rounded-2xl p-6 shadow-lg">
                <h3 class="font-bold text-lg mb-6 flex items-center gap-2">
                    <span class="material-icons-outlined text-gov-gold">task_alt</span>
                    Recommended Actions
                </h3>
                <div class="space-y-3">
                    <div class="flex items-start gap-3 p-3 bg-white/10 rounded-lg">
                        <span class="material-icons-outlined text-gov-gold text-sm mt-0.5">check_circle</span>
                        <div>
                            <p class="text-sm font-semibold">Increase Vector Control</p>
                            <p class="text-xs opacity-80">Deploy teams in high-risk zones</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3 p-3 bg-white/10 rounded-lg">
                        <span class="material-icons-outlined text-gov-gold text-sm mt-0.5">check_circle</span>
                        <div>
                            <p class="text-sm font-semibold">Awareness Campaigns</p>
                            <p class="text-xs opacity-80">Launch in 12 identified states</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3 p-3 bg-white/10 rounded-lg">
                        <span class="material-icons-outlined text-gov-gold text-sm mt-0.5">check_circle</span>
                        <div>
                            <p class="text-sm font-semibold">Stock Medical Supplies</p>
                            <p class="text-xs opacity-80">Prepare for surge capacity</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3 p-3 bg-white/10 rounded-lg">
                        <span class="material-icons-outlined text-gov-gold text-sm mt-0.5">check_circle</span>
                        <div>
                            <p class="text-sm font-semibold">Enhance Surveillance</p>
                            <p class="text-xs opacity-80">Real-time monitoring systems</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summer Season Preparedness Section -->
        <div
            class="bg-gradient-to-br from-orange-50 to-yellow-50 dark:from-orange-900/20 dark:to-yellow-900/20 rounded-3xl p-8 border-2 border-orange-200 dark:border-orange-700 shadow-lg">
            <div class="flex items-center gap-3 mb-6">
                <span class="material-icons-outlined text-4xl text-orange-600">wb_sunny</span>
                <div>
                    <h2 class="text-2xl font-bold text-secondary dark:text-white">Summer Season Preparedness 2026</h2>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Upcoming Season: March - June | Based on 2025
                        Analysis</p>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <!-- Last Year's Summer Trends -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                    <h3 class="font-bold text-lg text-secondary dark:text-white mb-4 flex items-center gap-2">
                        <span class="material-icons-outlined text-orange-600">trending_up</span>
                        Summer 2025 Trends
                    </h3>
                    <div class="space-y-4">
                        <div class="flex items-start gap-3">
                            <div class="w-2 h-2 bg-red-500 rounded-full mt-2"></div>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Heat Wave Impact</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">45+ days above 42Â°C in North India
                                </p>
                                <p class="text-xs text-red-600 font-bold mt-1">2,340 heat stroke cases</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="w-2 h-2 bg-orange-500 rounded-full mt-2"></div>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Waterborne Diseases</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Water scarcity led to contamination
                                </p>
                                <p class="text-xs text-orange-600 font-bold mt-1">18,500 diarrhea cases</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="w-2 h-2 bg-yellow-500 rounded-full mt-2"></div>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Food Poisoning Surge</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Peak in May-June period</p>
                                <p class="text-xs text-yellow-600 font-bold mt-1">12,800 reported cases</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-3">
                            <div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Vector-Borne Prep</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Pre-monsoon mosquito breeding</p>
                                <p class="text-xs text-blue-600 font-bold mt-1">Early dengue cases: 890</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Key Learnings from 2025 -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                    <h3 class="font-bold text-lg text-secondary dark:text-white mb-4 flex items-center gap-2">
                        <span class="material-icons-outlined text-blue-600">school</span>
                        Key Learnings 2025
                    </h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                            <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">Early Warning Systems
                            </p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Heat alerts 48hrs in advance reduced
                                mortality by 35%</p>
                        </div>
                        <div class="p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                            <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">Cooling Centers</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Public cooling centers served 1.2M
                                people effectively</p>
                        </div>
                        <div class="p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg">
                            <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">Water Quality Monitoring
                            </p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Real-time testing prevented major
                                cholera outbreak</p>
                        </div>
                        <div class="p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg">
                            <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">School Timings</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">Adjusted hours protected 50K+ children
                                from heat stress</p>
                        </div>
                        <div class="p-3 bg-red-50 dark:bg-red-900/20 rounded-lg">
                            <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">Healthcare Surge</p>
                            <p class="text-xs text-gray-600 dark:text-gray-400">ORS stockpiling critical during peak
                                summer months</p>
                        </div>
                    </div>
                </div>

                <!-- 2026 Precautions & Action Plan -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                    <h3 class="font-bold text-lg text-secondary dark:text-white mb-4 flex items-center gap-2">
                        <span class="material-icons-outlined text-green-600">verified_user</span>
                        2026 Action Plan
                    </h3>
                    <div class="space-y-3">
                        <div class="flex items-start gap-2">
                            <span class="material-icons-outlined text-green-600 text-sm mt-0.5">check_circle</span>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Heat Action Plans</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Deploy in 28 states by March 15</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="material-icons-outlined text-green-600 text-sm mt-0.5">check_circle</span>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Water Security</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Ensure safe drinking water in 500+
                                    districts</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="material-icons-outlined text-green-600 text-sm mt-0.5">check_circle</span>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Public Awareness</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Mass media campaign on heat safety
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="material-icons-outlined text-green-600 text-sm mt-0.5">check_circle</span>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Medical Preparedness</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Stock ORS, IV fluids in all PHCs</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="material-icons-outlined text-green-600 text-sm mt-0.5">check_circle</span>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Vulnerable Groups</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Special focus on elderly, outdoor
                                    workers</p>
                            </div>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="material-icons-outlined text-green-600 text-sm mt-0.5">check_circle</span>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 dark:text-white">Vector Control</p>
                                <p class="text-xs text-gray-600 dark:text-gray-400">Pre-monsoon anti-larval operations
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Expected Summer Disease Timeline -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm">
                <h3 class="font-bold text-lg text-secondary dark:text-white mb-4 flex items-center gap-2">
                    <span class="material-icons-outlined text-orange-600">calendar_month</span>
                    Expected Summer 2026 Disease Timeline
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <div class="p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl border-l-4 border-orange-500">
                        <p class="text-xs font-bold text-orange-600 mb-2">MARCH</p>
                        <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">Early Heat Stress</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Temperature rise begins</p>
                        <p class="text-xs text-orange-600 font-bold mt-2">Risk: Medium</p>
                    </div>
                    <div class="p-4 bg-red-50 dark:bg-red-900/20 rounded-xl border-l-4 border-red-500">
                        <p class="text-xs font-bold text-red-600 mb-2">APRIL</p>
                        <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">Heat Wave Peak</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Heat strokes, dehydration surge</p>
                        <p class="text-xs text-red-600 font-bold mt-2">Risk: High</p>
                    </div>
                    <div class="p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border-l-4 border-yellow-500">
                        <p class="text-xs font-bold text-yellow-600 mb-2">MAY</p>
                        <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">Waterborne Diseases</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Diarrhea, typhoid, cholera</p>
                        <p class="text-xs text-yellow-600 font-bold mt-2">Risk: High</p>
                    </div>
                    <div class="p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border-l-4 border-blue-500">
                        <p class="text-xs font-bold text-blue-600 mb-2">JUNE</p>
                        <p class="text-sm font-semibold text-gray-900 dark:text-white mb-1">Pre-Monsoon Vector</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">Early dengue, malaria cases</p>
                        <p class="text-xs text-blue-600 font-bold mt-2">Risk: Medium-High</p>
                    </div>
                </div>
            </div>

            <!-- Quick Action Alert -->
            <div class="mt-6 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-2xl p-6">
                <div class="flex items-start gap-4">
                    <span class="material-icons-outlined text-4xl">campaign</span>
                    <div class="flex-1">
                        <h4 class="font-bold text-xl mb-2">Immediate Actions Required</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                            <div class="flex items-center gap-2">
                                <span class="material-icons-outlined">water_drop</span>
                                <p class="text-sm">Ensure water availability in all districts</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="material-icons-outlined">local_hospital</span>
                                <p class="text-sm">Activate heat stroke treatment centers</p>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="material-icons-outlined">notifications_active</span>
                                <p class="text-sm">Launch public awareness campaigns</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Detailed Report Modal -->
    <div id="detailModal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl">
            <!-- Modal Header -->
            <div
                class="sticky top-0 bg-gradient-to-r from-secondary to-secondary-light text-white p-6 rounded-t-3xl z-10">
                <div class="flex justify-between items-start">
                    <div>
                        <h2 id="modalTitle" class="text-2xl font-bold mb-2">State Outbreak Report</h2>
                        <p id="modalSubtitle" class="text-sm opacity-90">Detailed analysis and response measures</p>
                    </div>
                    <button onclick="closeModal()"
                        class="text-white hover:bg-white/20 rounded-full p-2 transition-colors">
                        <span class="material-icons-outlined">close</span>
                    </button>
                </div>
            </div>

            <!-- Modal Content -->
            <div class="p-6 space-y-6">
                <!-- Key Stats -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-xl">
                        <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">Total Cases</p>
                        <p id="statCases" class="text-2xl font-bold text-red-600 dark:text-red-400">0</p>
                    </div>
                    <div class="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-xl">
                        <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">Active</p>
                        <p id="statActive" class="text-2xl font-bold text-orange-600 dark:text-orange-400">0</p>
                    </div>
                    <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-xl">
                        <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">Recovered</p>
                        <p id="statRecovered" class="text-2xl font-bold text-green-600 dark:text-green-400">0</p>
                    </div>
                    <div class="bg-gray-50 dark:bg-gray-700 p-4 rounded-xl">
                        <p class="text-xs text-gray-600 dark:text-gray-400 mb-1">Fatality Rate</p>
                        <p id="statFatality" class="text-2xl font-bold text-gray-600 dark:text-gray-400">0%</p>
                    </div>
                </div>

                <!-- Timeline -->
                <div class="bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-6">
                    <h3 class="font-bold text-lg text-secondary dark:text-white mb-4 flex items-center gap-2">
                        <span class="material-icons-outlined text-primary">timeline</span>
                        Outbreak Timeline
                    </h3>
                    <div class="space-y-3" id="timelineContent">
                        <!-- Timeline items will be inserted here -->
                    </div>
                </div>

                <!-- Affected Districts -->
                <div class="bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-6">
                    <h3 class="font-bold text-lg text-secondary dark:text-white mb-4 flex items-center gap-2">
                        <span class="material-icons-outlined text-primary">location_city</span>
                        Most Affected Districts
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-3" id="districtsContent">
                        <!-- District items will be inserted here -->
                    </div>
                </div>

                <!-- Demographics -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-6">
                        <h3 class="font-bold text-lg text-secondary dark:text-white mb-4 flex items-center gap-2">
                            <span class="material-icons-outlined text-primary">groups</span>
                            Age Distribution
                        </h3>
                        <div class="space-y-2" id="ageDistribution">
                            <!-- Age distribution will be inserted here -->
                        </div>
                    </div>

                    <div class="bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-6">
                        <h3 class="font-bold text-lg text-secondary dark:text-white mb-4 flex items-center gap-2">
                            <span class="material-icons-outlined text-primary">medical_services</span>
                            Response Measures
                        </h3>
                        <div class="space-y-2" id="responseMeasures">
                            <!-- Response measures will be inserted here -->
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-3 pt-4">
                    <button
                        class="flex-1 bg-primary text-secondary font-bold py-3 px-6 rounded-xl hover:bg-primary/90 transition-colors flex items-center justify-center gap-2">
                        <span class="material-icons-outlined">download</span>
                        Download Full Report
                    </button>
                    <button
                        class="flex-1 bg-secondary text-white font-bold py-3 px-6 rounded-xl hover:bg-secondary-light transition-colors flex items-center justify-center gap-2">
                        <span class="material-icons-outlined">share</span>
                        Share Report
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="../js/config/constants.js"></script>
    <script src="../js/config/app-config.js"></script>
    <script src="../js/utils/app-utils.js"></script>
    <script src="../js/utils/force-login.js"></script>
    <script src="../js/services/auth.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Initialize auth service
            if (typeof AuthService !== 'undefined') {
                AuthService.init();
                const user = AuthService.getCurrentUser();
                if (!AuthService.isAuthenticated()) {
                    window.location.href = '../index.html';
                    return;
                }
                const adminName = document.getElementById('admin-name');
                const adminDept = document.getElementById('admin-dept');
                if (user) {
                    adminName.textContent = user.name || 'Ministry Admin';
                    if (user.department) adminDept.textContent = user.department;
                }
                const logoutBtn = document.getElementById('logout-btn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', async () => {
                        await AuthService.logout();
                        window.location.href = '../index.html';
                    });
                }
            }

            // Seasonal Disease Trends Chart
            const seasonalCtx = document.getElementById('seasonalChart');
            if (seasonalCtx) {
                new Chart(seasonalCtx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                        datasets: [
                            {
                                label: 'Dengue',
                                data: [8, 12, 18, 28, 45, 98, 178, 234, 198, 145, 89, 34],
                                borderColor: '#ef4444',
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Influenza',
                                data: [312, 298, 245, 198, 156, 98, 67, 54, 89, 145, 234, 289],
                                borderColor: '#3b82f6',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Malaria',
                                data: [18, 23, 28, 38, 56, 89, 134, 189, 167, 123, 78, 34],
                                borderColor: '#f59e0b',
                                backgroundColor: 'rgba(245, 158, 11, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Jaundice',
                                data: [28, 34, 38, 42, 48, 58, 72, 89, 98, 112, 89, 56],
                                borderColor: '#eab308',
                                backgroundColor: 'rgba(234, 179, 8, 0.1)',
                                tension: 0.4,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Cases (per 100k)'
                                }
                            }
                        }
                    }
                });
            }

            // Age Group Distribution Chart - Dynamic
            const ageGroupCtx = document.getElementById('ageGroupChart');
            let ageGroupChart = null;

            // Disease-specific age distribution data based on real patterns
            const ageGroupData = {
                all: {
                    male: [234, 456, 389, 678, 892, 756, 634],
                    female: [198, 423, 367, 645, 834, 712, 598]
                },
                covid: {
                    male: [89, 134, 178, 312, 456, 589, 712],
                    female: [76, 112, 156, 289, 423, 534, 678]
                },
                dengue: {
                    male: [156, 234, 289, 345, 398, 312, 234],
                    female: [134, 212, 267, 323, 378, 289, 198]
                },
                influenza: {
                    male: [312, 389, 234, 198, 267, 345, 423],
                    female: [289, 356, 212, 178, 234, 312, 389]
                },
                malaria: {
                    male: [198, 267, 189, 156, 134, 112, 89],
                    female: [178, 234, 167, 134, 112, 98, 76]
                },
                jaundice: {
                    male: [89, 123, 167, 234, 198, 145, 112],
                    female: [76, 112, 145, 212, 178, 134, 98]
                }
            };

            function createAgeGroupChart(disease = 'all') {
                const data = ageGroupData[disease];

                if (ageGroupChart) {
                    ageGroupChart.destroy();
                }

                ageGroupChart = new Chart(ageGroupCtx, {
                    type: 'bar',
                    data: {
                        labels: ['0-5', '6-12', '13-18', '19-30', '31-45', '46-60', '60+'],
                        datasets: [
                            {
                                label: 'Male',
                                data: data.male,
                                backgroundColor: 'rgba(59, 130, 246, 0.8)',
                            },
                            {
                                label: 'Female',
                                data: data.female,
                                backgroundColor: 'rgba(236, 72, 153, 0.8)',
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Number of Cases'
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'Age Groups'
                                }
                            }
                        }
                    }
                });
            }

            if (ageGroupCtx) {
                createAgeGroupChart('all');

                // Add event listener to disease selector
                const diseaseSelector = document.getElementById('diseaseSelector');
                if (diseaseSelector) {
                    diseaseSelector.addEventListener('change', function () {
                        createAgeGroupChart(this.value);
                    });
                }
            }

            // Outbreak Prediction Chart
            const predictionCtx = document.getElementById('predictionChart');
            if (predictionCtx) {
                new Chart(predictionCtx, {
                    type: 'line',
                    data: {
                        labels: Array.from({ length: 30 }, (_, i) => `Day ${i + 1}`),
                        datasets: [
                            {
                                label: 'Predicted Cases',
                                data: [145, 152, 168, 189, 212, 234, 267, 298, 334, 367, 398, 423, 456, 489, 512, 534, 556, 578, 598, 612, 623, 634, 645, 656, 667, 678, 689, 698, 706, 712],
                                borderColor: '#ef4444',
                                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                                tension: 0.4,
                                fill: true,
                                borderDash: [5, 5]
                            },
                            {
                                label: 'Actual Cases',
                                data: [145, 152, 168, 189, 212, 234, 267, 298, 334, 367, 398, 423, 456, 489, 512, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
                                borderColor: '#3b82f6',
                                backgroundColor: 'rgba(59, 130, 246, 0.1)',
                                tension: 0.4,
                                fill: true
                            },
                            {
                                label: 'Confidence Interval (Upper)',
                                data: [160, 170, 190, 215, 245, 275, 310, 345, 385, 425, 465, 505, 545, 585, 625, 665, 705, 745, 785, 825, 865, 905, 945, 985, 1025, 1065, 1105, 1145, 1185, 1225],
                                borderColor: 'rgba(239, 68, 68, 0.3)',
                                backgroundColor: 'transparent',
                                borderDash: [2, 2],
                                pointRadius: 0
                            },
                            {
                                label: 'Confidence Interval (Lower)',
                                data: [130, 134, 146, 163, 179, 193, 224, 251, 283, 309, 331, 341, 367, 393, 399, 403, 407, 411, 411, 399, 381, 363, 345, 327, 309, 291, 273, 251, 227, 199],
                                borderColor: 'rgba(239, 68, 68, 0.3)',
                                backgroundColor: 'transparent',
                                borderDash: [2, 2],
                                pointRadius: 0
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'top',
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'Projected Cases'
                                }
                            }
                        }
                    }
                });
            }

            // Disease Severity Matrix (Bubble Chart)
            const severityCtx = document.getElementById('severityChart');
            if (severityCtx) {
                new Chart(severityCtx, {
                    type: 'bubble',
                    data: {
                        datasets: [
                            {
                                label: 'Dengue',
                                data: [{ x: 6.2, y: 7.1, r: 18 }],
                                backgroundColor: 'rgba(239, 68, 68, 0.6)',
                            },
                            {
                                label: 'COVID-19',
                                data: [{ x: 4.5, y: 5.8, r: 14 }],
                                backgroundColor: 'rgba(59, 130, 246, 0.6)',
                            },
                            {
                                label: 'Malaria',
                                data: [{ x: 4.8, y: 6.2, r: 15 }],
                                backgroundColor: 'rgba(245, 158, 11, 0.6)',
                            },
                            {
                                label: 'Influenza',
                                data: [{ x: 7.2, y: 5.5, r: 22 }],
                                backgroundColor: 'rgba(34, 197, 94, 0.6)',
                            },
                            {
                                label: 'Typhoid',
                                data: [{ x: 3.5, y: 4.8, r: 11 }],
                                backgroundColor: 'rgba(168, 85, 247, 0.6)',
                            },
                            {
                                label: 'Jaundice',
                                data: [{ x: 5.8, y: 6.9, r: 19 }],
                                backgroundColor: 'rgba(234, 179, 8, 0.6)',
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'right',
                            },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        return context.dataset.label + ': Spread=' + context.parsed.x + ', Severity=' + context.parsed.y;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 10,
                                title: {
                                    display: true,
                                    text: 'Severity Index'
                                }
                            },
                            x: {
                                beginAtZero: true,
                                max: 10,
                                title: {
                                    display: true,
                                    text: 'Transmission Rate'
                                }
                            }
                        }
                    }
                });
            }
        });

        // Modal handling functions
        function closeModal() {
            const modal = document.getElementById('detailModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function openModal(state, disease, cases, severity) {
            const modal = document.getElementById('detailModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');

            // Update modal title
            document.getElementById('modalTitle').textContent = `${state} - ${disease} Outbreak`;
            document.getElementById('modalSubtitle').textContent = `Detailed Report | Last Updated: ${new Date().toLocaleDateString('en-IN')}`;

            // Get detailed data based on state
            const detailData = getStateDetails(state, disease, cases, severity);

            // Update stats
            document.getElementById('statCases').textContent = detailData.totalCases;
            document.getElementById('statActive').textContent = detailData.active;
            document.getElementById('statRecovered').textContent = detailData.recovered;
            document.getElementById('statFatality').textContent = detailData.fatality + '%';

            // Update timeline
            const timelineContent = document.getElementById('timelineContent');
            timelineContent.innerHTML = detailData.timeline.map(item => `
                <div class="flex gap-3">
                    <div class="w-2 h-2 rounded-full ${item.color} mt-2"></div>
                    <div class="flex-1">
                        <p class="text-sm font-semibold text-gray-900 dark:text-white">${item.date}</p>
                        <p class="text-xs text-gray-600 dark:text-gray-400">${item.event}</p>
                    </div>
                </div>
            `).join('');

            // Update districts
            const districtsContent = document.getElementById('districtsContent');
            districtsContent.innerHTML = detailData.districts.map(district => `
                <div class="flex justify-between items-center p-3 bg-white dark:bg-gray-800 rounded-lg">
                    <span class="text-sm font-semibold text-gray-900 dark:text-white">${district.name}</span>
                    <span class="text-sm font-bold text-red-600 dark:text-red-400">${district.cases}</span>
                </div>
            `).join('');

            // Update age distribution
            const ageDistribution = document.getElementById('ageDistribution');
            ageDistribution.innerHTML = detailData.ageGroups.map(group => `
                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span class="text-gray-700 dark:text-gray-300">${group.range}</span>
                        <span class="font-bold text-gray-900 dark:text-white">${group.percentage}%</span>
                    </div>
                    <div class="h-2 bg-gray-200 dark:bg-gray-600 rounded-full overflow-hidden">
                        <div class="h-full bg-primary rounded-full" style="width: ${group.percentage}%"></div>
                    </div>
                </div>
            `).join('');

            // Update response measures
            const responseMeasures = document.getElementById('responseMeasures');
            responseMeasures.innerHTML = detailData.responses.map(response => `
                <div class="flex items-start gap-2">
                    <span class="material-icons-outlined text-primary text-sm mt-0.5">check_circle</span>
                    <p class="text-sm text-gray-700 dark:text-gray-300">${response}</p>
                </div>
            `).join('');
        }

        function getStateDetails(state, disease, cases, severity) {
            // Mock data - in production, this would fetch from API
            const dataMap = {
                'Madhya Pradesh': {
                    totalCases: '456',
                    active: '342',
                    recovered: '98',
                    fatality: '3.5',
                    timeline: [
                        { date: 'Feb 5, 2026', event: 'First cluster identified in Bhopal district', color: 'bg-red-500' },
                        { date: 'Feb 3, 2026', event: 'Contaminated water source detected in 3 villages', color: 'bg-orange-500' },
                        { date: 'Jan 28, 2026', event: 'Initial cases reported in rural areas', color: 'bg-yellow-500' },
                        { date: 'Jan 25, 2026', event: 'Surveillance teams deployed', color: 'bg-blue-500' }
                    ],
                    districts: [
                        { name: 'Bhopal', cases: 156 },
                        { name: 'Indore', cases: 98 },
                        { name: 'Jabalpur', cases: 87 },
                        { name: 'Gwalior', cases: 65 },
                        { name: 'Ujjain', cases: 50 }
                    ],
                    ageGroups: [
                        { range: '0-18 years', percentage: 28 },
                        { range: '19-35 years', percentage: 35 },
                        { range: '36-50 years', percentage: 22 },
                        { range: '51+ years', percentage: 15 }
                    ],
                    responses: [
                        'Water quality testing in all affected areas',
                        'Distribution of water purification tablets',
                        'Mobile medical units deployed to rural regions',
                        'Public awareness campaigns launched',
                        'Isolation wards set up in 12 district hospitals'
                    ]
                },
                'Delhi NCR': {
                    totalCases: '1,234',
                    active: '892',
                    recovered: '328',
                    fatality: '1.1',
                    timeline: [
                        { date: 'Feb 7, 2026', event: 'Peak winter pollution levels recorded', color: 'bg-red-500' },
                        { date: 'Feb 1, 2026', event: 'Surge in hospital admissions begins', color: 'bg-orange-500' },
                        { date: 'Jan 20, 2026', event: 'Cold wave intensifies respiratory cases', color: 'bg-yellow-500' },
                        { date: 'Jan 15, 2026', event: 'Seasonal monitoring initiated', color: 'bg-blue-500' }
                    ],
                    districts: [
                        { name: 'Central Delhi', cases: 345 },
                        { name: 'East Delhi', cases: 289 },
                        { name: 'Gurgaon', cases: 234 },
                        { name: 'Noida', cases: 198 },
                        { name: 'Faridabad', cases: 168 }
                    ],
                    ageGroups: [
                        { range: '0-18 years', percentage: 32 },
                        { range: '19-35 years', percentage: 25 },
                        { range: '36-50 years', percentage: 23 },
                        { range: '51+ years', percentage: 20 }
                    ],
                    responses: [
                        'Free masks distributed at public places',
                        'Air purifiers installed in schools',
                        'Telemedicine consultations expanded',
                        'Emergency respiratory care units activated',
                        'Public advisories on pollution protection'
                    ]
                },
                'Maharashtra': {
                    totalCases: '987',
                    active: '654',
                    recovered: '320',
                    fatality: '1.3',
                    timeline: [
                        { date: 'Feb 6, 2026', event: 'Seasonal flu vaccination drive launched', color: 'bg-yellow-500' },
                        { date: 'Jan 30, 2026', event: 'Cases spike in Mumbai metropolitan region', color: 'bg-orange-500' },
                        { date: 'Jan 22, 2026', event: 'First wave of seasonal flu detected', color: 'bg-yellow-500' },
                        { date: 'Jan 18, 2026', event: 'Enhanced surveillance activated', color: 'bg-blue-500' }
                    ],
                    districts: [
                        { name: 'Mumbai', cases: 345 },
                        { name: 'Pune', cases: 234 },
                        { name: 'Nagpur', cases: 156 },
                        { name: 'Thane', cases: 134 },
                        { name: 'Nashik', cases: 118 }
                    ],
                    ageGroups: [
                        { range: '0-18 years', percentage: 30 },
                        { range: '19-35 years', percentage: 28 },
                        { range: '36-50 years', percentage: 24 },
                        { range: '51+ years', percentage: 18 }
                    ],
                    responses: [
                        'Free flu vaccination for vulnerable groups',
                        'School health screening programs',
                        'Antiviral medication stockpiled',
                        'Public health advisories issued',
                        'Hospital preparedness enhanced'
                    ]
                },
                'West Bengal': {
                    totalCases: '654',
                    active: '423',
                    recovered: '218',
                    fatality: '2.0',
                    timeline: [
                        { date: 'Feb 4, 2026', event: 'Water contamination confirmed in Kolkata suburbs', color: 'bg-red-500' },
                        { date: 'Jan 29, 2026', event: 'Cholera and typhoid cases increase', color: 'bg-orange-500' },
                        { date: 'Jan 24, 2026', event: 'Heavy rainfall causes sanitation issues', color: 'bg-yellow-500' },
                        { date: 'Jan 20, 2026', event: 'Preventive measures initiated', color: 'bg-blue-500' }
                    ],
                    districts: [
                        { name: 'Kolkata', cases: 234 },
                        { name: 'Howrah', cases: 156 },
                        { name: 'North 24 Parganas', cases: 112 },
                        { name: 'South 24 Parganas', cases: 89 },
                        { name: 'Hooghly', cases: 63 }
                    ],
                    ageGroups: [
                        { range: '0-18 years', percentage: 35 },
                        { range: '19-35 years', percentage: 30 },
                        { range: '36-50 years', percentage: 20 },
                        { range: '51+ years', percentage: 15 }
                    ],
                    responses: [
                        'Emergency water purification systems deployed',
                        'Chlorination of water sources',
                        'ORS distribution in affected areas',
                        'Sanitation drives in urban slums',
                        'Medical camps in vulnerable communities'
                    ]
                }
            };

            return dataMap[state] || dataMap['Madhya Pradesh'];
        }

        // Add click listeners to state cards
        document.querySelectorAll('.state-card').forEach(card => {
            card.addEventListener('click', function () {
                const state = this.dataset.state;
                const disease = this.dataset.disease;
                const cases = this.dataset.cases;
                const severity = this.dataset.severity;
                openModal(state, disease, cases, severity);
            });
        });

        // Close modal on backdrop click
        document.getElementById('detailModal')?.addEventListener('click', function (e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>

</html>